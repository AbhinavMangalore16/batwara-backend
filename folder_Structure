/batwara-backend
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api-gateway/                     # ğŸŒ Unified HTTP entry point
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/                  # REST entrypoints â†’ service RPC
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ group.routes.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ expense.routes.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settlement.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/             # Minimal controllers
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ server.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ scripts/                         # Dev tools, DB migrations, seeds
â”‚       â”œâ”€â”€ migrate.ts
â”‚       â””â”€â”€ seed.ts
â”‚
â”œâ”€â”€ services/                             # ğŸ”¥ Each business domain fully isolated
â”‚   â”œâ”€â”€ user-service/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/                   # Business logic
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.entity.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.repo.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ postgres/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ user.pg.repo.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.dto.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user.response.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.created.event.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ eventHandlers.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ group-service/
â”‚   â”‚   â”œâ”€â”€ src/domain/group.service.ts
â”‚   â”‚   â”œâ”€â”€ src/domain/group.entity.ts
â”‚   â”‚   â”œâ”€â”€ src/repository/group.repo.interface.ts
â”‚   â”‚   â”œâ”€â”€ src/repository/postgres/group.pg.repo.ts
â”‚   â”‚   â”œâ”€â”€ src/dto/create-group.dto.ts
â”‚   â”‚   â”œâ”€â”€ src/events/group.created.event.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ expense-service/
â”‚   â”‚   â”œâ”€â”€ src/domain/expense.service.ts
â”‚   â”‚   â”œâ”€â”€ src/domain/expense.entity.ts
â”‚   â”‚   â”œâ”€â”€ src/repository/postgres/expense.pg.repo.ts
â”‚   â”‚   â”œâ”€â”€ src/dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ base-expense.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ split-equal.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ split-exact.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ split-percent.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ create-expense.dto.ts
â”‚   â”‚   â”œâ”€â”€ src/events/expense.created.event.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ settlement-service/
â”‚   â”‚   â”œâ”€â”€ src/domain/settlement.service.ts
â”‚   â”‚   â”œâ”€â”€ src/repository/graph/settlement.graph.repo.ts   # Neo4j
â”‚   â”‚   â”œâ”€â”€ src/events/settlement.completed.event.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ notification-service/             # Listens to events only
â”‚   â”‚   â”œâ”€â”€ src/consumers/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.events.consumer.ts
â”‚   â”‚   â”‚   â””â”€â”€ expense.events.consumer.ts
â”‚   â”‚   â”œâ”€â”€ src/providers/email.provider.ts
â”‚   â”‚   â”œâ”€â”€ src/providers/push.provider.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ event-bus/                        # Kafka / NATS message broker
â”‚   â”‚   â”œâ”€â”€ eventBus.ts
â”‚   â”‚   â”œâ”€â”€ publisher.ts
â”‚   â”‚   â””â”€â”€ subscriber.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                               # All DB clients in one place
â”‚   â”‚   â”œâ”€â”€ postgres/
â”‚   â”‚   â”‚   â””â”€â”€ postgres-client.ts
â”‚   â”‚   â”œâ”€â”€ neo4j/
â”‚   â”‚   â”‚   â””â”€â”€ neo4j-client.ts
â”‚   â”‚   â””â”€â”€ redis/
â”‚   â”‚       â””â”€â”€ redis-client.ts
â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ env.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚
â”‚   â””â”€â”€ security/
â”‚       â”œâ”€â”€ jwt.ts
â”‚       â”œâ”€â”€ password.ts
â”‚       â””â”€â”€ crypto.ts
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ events/                            # ğŸ”„ Event Contract Schemas (source of truth)
â”‚   â”‚   â”œâ”€â”€ user.events.ts
â”‚   â”‚   â”œâ”€â”€ group.events.ts
â”‚   â”‚   â”œâ”€â”€ expense.events.ts
â”‚   â”‚   â””â”€â”€ settlement.events.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/                        # Reusable TS interfaces
â”‚   â”‚   â”œâ”€â”€ IBaseRepository.ts
â”‚   â”‚   â””â”€â”€ IServiceResponse.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                             # Pure utility functions
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â””â”€â”€ error.ts
â”‚   â”‚
â”‚   â””â”€â”€ types.ts                           # Global shared types
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
